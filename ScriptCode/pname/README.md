# CC2020で作ったシェイプをCS6にダウンさせる
普段仕事の関係でCS6で作業してCC2020等にアップさせてるが、たまにCS2020で作ってCS6にダウンさせたい時がある。  
今まではCS6/CS2020両方立ち上げて手作業でコンバートさせてたが、手間的に無理になってきたので方法を考えてみた。  
  
最初はスクリプトで適当にjsonに書き出してしまおうと考えたが、CS6で不具合あって実装できず。CCだったら問題にないのでそれはそれとして重宝してる(Shape保存.jsx)  
ただ、カスタムプロパティがほとんどスクリプトでは対応できないので今回の方法を考えた。  
  
# アニメーションプリセットの変換
アニメーションプリセット(ffx)は上位互換で下のバージョンでは読めないが、いろいろずるをして変換してしまう。  
ただ、時間がなかったのでファイルの完全コンバートは諦めた。  

* CC2020で変換したいシェイプをアニメーションプリセットとして保存。その時必ずグループに内包して、そのグループを選ぶ。
* 同じグループをpname.jsxで保存する（内容は後で説明）
* 保存したプリセットファイルをバイナリーエディタを立ち上げ、0x1Bの数値0x5Dを0x51へ書き換える（バージョン偽装のパッチあて）
* cs6で先にパッチあてたプリセットを適応させる。多分エラーが出まくる。
* NEAMEDのプロパティグループがすべて"Utf8"になってしまって、エクスプレッションがすべて消えてる状態で読み込まれる。
* pname.jsxを同じように選択して、保存したjsonファイルを適応させると元に戻るはず。

簡単に説明すると、プリセットファイルをバージョン偽造して読み込ませても、CCから文字列がUTF-8エンコードされていてデータの収納フォーマットが違うので文字列がすべてUtf8としまうので、そこだけスクリプトで補完したやり方になる。  
  
プリセットファイルのバイナリ見る限りだと単純なクラスのシリアライズっぽいので、時間さえあれば直接変換もできそうだが、今までの経験上作る間に新しくなってしまうので、上記のお手軽方法で済ますことにした。  
  
